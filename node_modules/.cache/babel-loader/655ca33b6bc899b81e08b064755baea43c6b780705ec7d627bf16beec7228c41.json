{"ast":null,"code":"import { isValidDomain } from './isValidDomain.js';\nimport { WebAuthnError } from './webAuthnError.js';\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.get()`\n */\nexport function identifyAuthenticationError({\n  error,\n  options\n}) {\n  const {\n    publicKey\n  } = options;\n  if (!publicKey) {\n    throw Error('options was missing required publicKey property');\n  }\n  if (error.name === 'AbortError') {\n    if (options.signal instanceof AbortSignal) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n      return new WebAuthnError({\n        message: 'Authentication ceremony was sent an abort signal',\n        code: 'ERROR_CEREMONY_ABORTED',\n        cause: error\n      });\n    }\n  } else if (error.name === 'NotAllowedError') {\n    /**\n     * Pass the error directly through. Platforms are overloading this error beyond what the spec\n     * defines and we don't want to overwrite potentially useful error messages.\n     */\n    return new WebAuthnError({\n      message: error.message,\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n      cause: error\n    });\n  } else if (error.name === 'SecurityError') {\n    const effectiveDomain = globalThis.location.hostname;\n    if (!isValidDomain(effectiveDomain)) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 5)\n      return new WebAuthnError({\n        message: `${globalThis.location.hostname} is an invalid domain`,\n        code: 'ERROR_INVALID_DOMAIN',\n        cause: error\n      });\n    } else if (publicKey.rpId !== effectiveDomain) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 6)\n      return new WebAuthnError({\n        message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\n        code: 'ERROR_INVALID_RP_ID',\n        cause: error\n      });\n    }\n  } else if (error.name === 'UnknownError') {\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 1)\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 12)\n    return new WebAuthnError({\n      message: 'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n      code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n      cause: error\n    });\n  }\n  return error;\n}","map":{"version":3,"names":["isValidDomain","WebAuthnError","identifyAuthenticationError","error","options","publicKey","Error","name","signal","AbortSignal","message","code","cause","effectiveDomain","globalThis","location","hostname","rpId"],"sources":["/Users/rohit/Desktop/projects/FinVote/node_modules/@simplewebauthn/browser/esm/helpers/identifyAuthenticationError.js"],"sourcesContent":["import { isValidDomain } from './isValidDomain.js';\nimport { WebAuthnError } from './webAuthnError.js';\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.get()`\n */\nexport function identifyAuthenticationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n            return new WebAuthnError({\n                message: 'Authentication ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'NotAllowedError') {\n        /**\n         * Pass the error directly through. Platforms are overloading this error beyond what the spec\n         * defines and we don't want to overwrite potentially useful error messages.\n         */\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = globalThis.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 5)\n            return new WebAuthnError({\n                message: `${globalThis.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rpId !== effectiveDomain) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 6)\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 1)\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 12)\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,oBAAoB;AAClD,SAASC,aAAa,QAAQ,oBAAoB;AAClD;AACA;AACA;AACA,OAAO,SAASC,2BAA2BA,CAAC;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAE;EAC7D,MAAM;IAAEC;EAAU,CAAC,GAAGD,OAAO;EAC7B,IAAI,CAACC,SAAS,EAAE;IACZ,MAAMC,KAAK,CAAC,iDAAiD,CAAC;EAClE;EACA,IAAIH,KAAK,CAACI,IAAI,KAAK,YAAY,EAAE;IAC7B,IAAIH,OAAO,CAACI,MAAM,YAAYC,WAAW,EAAE;MACvC;MACA,OAAO,IAAIR,aAAa,CAAC;QACrBS,OAAO,EAAE,kDAAkD;QAC3DC,IAAI,EAAE,wBAAwB;QAC9BC,KAAK,EAAET;MACX,CAAC,CAAC;IACN;EACJ,CAAC,MACI,IAAIA,KAAK,CAACI,IAAI,KAAK,iBAAiB,EAAE;IACvC;AACR;AACA;AACA;IACQ,OAAO,IAAIN,aAAa,CAAC;MACrBS,OAAO,EAAEP,KAAK,CAACO,OAAO;MACtBC,IAAI,EAAE,sCAAsC;MAC5CC,KAAK,EAAET;IACX,CAAC,CAAC;EACN,CAAC,MACI,IAAIA,KAAK,CAACI,IAAI,KAAK,eAAe,EAAE;IACrC,MAAMM,eAAe,GAAGC,UAAU,CAACC,QAAQ,CAACC,QAAQ;IACpD,IAAI,CAAChB,aAAa,CAACa,eAAe,CAAC,EAAE;MACjC;MACA,OAAO,IAAIZ,aAAa,CAAC;QACrBS,OAAO,EAAE,GAAGI,UAAU,CAACC,QAAQ,CAACC,QAAQ,uBAAuB;QAC/DL,IAAI,EAAE,sBAAsB;QAC5BC,KAAK,EAAET;MACX,CAAC,CAAC;IACN,CAAC,MACI,IAAIE,SAAS,CAACY,IAAI,KAAKJ,eAAe,EAAE;MACzC;MACA,OAAO,IAAIZ,aAAa,CAAC;QACrBS,OAAO,EAAE,cAAcL,SAAS,CAACY,IAAI,8BAA8B;QACnEN,IAAI,EAAE,qBAAqB;QAC3BC,KAAK,EAAET;MACX,CAAC,CAAC;IACN;EACJ,CAAC,MACI,IAAIA,KAAK,CAACI,IAAI,KAAK,cAAc,EAAE;IACpC;IACA;IACA,OAAO,IAAIN,aAAa,CAAC;MACrBS,OAAO,EAAE,8GAA8G;MACvHC,IAAI,EAAE,mCAAmC;MACzCC,KAAK,EAAET;IACX,CAAC,CAAC;EACN;EACA,OAAOA,KAAK;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}